/*! cue 0.x | @link cuejs.com | @license MIT | @author Ryan Van Etten */
(function(u,D){function P(a,e){a=a||0;var b=a/60,c,g=60*a;c=(b/60).toFixed();b=(b%60).toFixed();a=(a%60).toFixed();g=(g%60).toFixed();b=[c,b,a,g];if(!1===e)return b;b=b.join(e||" : ");return b.replace(Q,"$10$2")}function R(a,h,b){var c;if(a="function"==typeof a?a.call(this):a){if("string"!=typeof a)return a;if(a=e.trim(a))return".json"===a.substr(-5)?e.get(a,function(a){a&&h.call(b,a)},"json"):c=E(a),c}}function F(a,h,b,c,g,k){k=k||0;var d=b.currentSrc,l,f=0,s=0,r=null,m=g.length;if(d)for(l=d.split(".").pop()||
"src";f<m;f++)if(g[f]&&g[f][l]===d){r=g[s=f+k];break}r||(s=0>k?m-1:0,r=g[s]);b.src=r[l]||"";a.setAttribute("data-cue-idx",s);x===c&&(a=G,c=r[G],null==c?b.removeAttribute(a):b.setAttribute(a,c));b.play();H(h,function(){var a,b,c,d;if(this&&1===this.nodeType&&(d=this.getAttribute(S),c=this.getAttribute(T),null!=d&&(d=r[d],null==d?e(this).empty():e(this).html(d)),c&&"string"==typeof c))for(a in c=E(c),c){if(!c.hasOwnProperty(a))break;if((b=c[a])&&"string"==typeof b){d=a;var f=r[b];null==f?this.removeAttribute(d):
this.setAttribute(d,f)}}});return s}function y(a,e,b,c){var g="data-"+b+"-cue",k={};k[g]="";return a.find(e).not("["+g+"]").on(b+".cue",c).attr(k).removeClass(I).addClass(J)}function w(a){return H(this,function(){function h(){var a=l.paused||l.ended;this.className="cue-"+(a?"pause":"play");b[a?"addClass":"removeClass"](U)[a?"removeClass":"addClass"](V)}if(1===this.nodeType){if("function"==typeof a)return w.call([this],a.call(this));var b=e(this),c,g,k,d,l,f;if(d=a||b.attr("data-cue"))if(d=R(d,w,b),
"object"==typeof d&&(d=!d?[]:K(d)?d:[d],l=b.find(x+","+L)[0])){k=l.tagName.toLowerCase();c=e(l);var s=b;c.each(function(){var a=this;null!=a.getAttribute(z)&&!s.find("."+M).length&&(a.removeAttribute(z),s.children().each(function(){if(this===a||e.contains(this,a))return A=A||e(W),!A.insertAfter(this)}))});var r=b.find(".cue-time");r.length&&c.on("timeupdate.cue",function(){r.html(P(this.currentTime))}).addClass(J).removeClass(I);y(b,".cue-play,.cue-pause","click",function(){l[l.paused||l.ended?"play":
"pause"]()});c.on("play.cue",h);c.on("pause.cue",h);if(f=d.length){for(;f--;){d[f]["track-number"]=f;if(srcs=d[f].src){srcs=K(srcs)?srcs:srcs.split(" ");for(j=srcs.length;j--;)srcs[j]&&(ext=srcs[j].split(".").pop())&&(d[f][ext]=d[f][ext]||srcs[j]);srcs=srcs[0]}c=d[f].src;var m=function(a){var b=a.split(".").pop();d[f][b]=d[f][b]||a},n=void 0,p=void 0,v=void 0,q=void 0,t=0,u=[];if(c){"function"!=typeof m&&null==n&&(n=m)&&(m=0);c="string"==typeof c?c.split(n||" "):c;for(p=c.length;t<p;)if(v=c[t++])q=
u.push(v)-1,m&&m.call(v,v,q,u)}c=d[f];a:{m=d[f];n=void 0;p=N[(k.nodeType?k.tagName:k).toLowerCase()];v=p.length;for(q=0;q<v;)if(n=m[p[q++]]){m=n;break a}m=""}c.src=m}g=this.getElementsByTagName("*");y(b,".cue-next","click",function(){F(b[0],g,l,k,d,1)});y(b,".cue-prev","click",function(){F(b[0],g,l,k,d,-1)})}else b.attr("data-cue","")}}})}for(var h=u.require,e=u.jQuery||!!h&&h("jquery")||u.ender||!!h&&h("ender"),K=Array.isArray||e.isArray||!!e.is&&e.is.Array,H=e.each,X=/^\s+|\s+$/,Y=e.trim||("".trim?
function(a){return a.trim()}:function(a){return a.replace(X,"")}),O=!!u.JSON&&JSON.parse,E=e.parseJSON||O&&function(a){return"string"!=typeof a||!(a=Y(a))?null:O(a)},Q=/(^|\D)(\d\D|\d$)/g,L="audio",x="video",z="controls",G="poster",J="cue-active",I="cue-inactive",V="cue-paused",U="cue-playing",S="data-cue-insert",T="data-cue-attr",N,h={},B,n,p,q,C,t,Z=[L,x],$={audio:{m4a:["audio/x-m4a;","audio/aac;"],wav:["audio/mpeg;"],ogg:['audio/ogg;codecs="vorbis"'],mp3:["audio/mpeg;"]},video:{ogg:['video/ogg;codecs="theora"'],
webm:['video/webm;codecs="vp8, vorbis"'],mp4:['video/mp4;codecs="avc1.42E01E"']}};n=Z.pop();)if(B=D.createElement(n),h[n]=[],B.canPlayType)for(p in t=$[n],t){if(!t.hasOwnProperty(p))break;for(C=t[p].length;C--;)if(q=B.canPlayType(t[p][C]),h[n][p]=!!q&&"no"!==q&&q){h[n]["maybe"===q?"push":"unshift"](p);break}}N=h;var M="cue-"+z,W="<div class="+M+"><button accesskey=j class=cue-prev title=previous><span>|&#9668;&#9668;</span></button><button accesskey=p class=cue-play title=play/pause><span>&#9658;</span><span>| |</span></button><button accesskey=k class=cue-next title=next><span>&#9658;&#9658;|</span></button><output class=cue-time></output></div>",
A;e.fn.cue=w;e(D).ready(function(){w.call(e("[data-cue]"))})})(this,document);