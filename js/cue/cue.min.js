/*! cue 0.5.1 | @link cuejs.com | @license MIT | @author Ryan Van Etten */
(function(r,D){function O(b,g){b=b||0;var a=b/60,d,j=60*b;d=(a/60).toFixed();a=(a%60).toFixed();b=(b%60).toFixed();j=(j%60).toFixed();a=[d,a,b,j];if(!1===g)return a;a=a.join(g||" : ");return a.replace(P,"$10$2")}function Q(b,k,a){var d;if(b="function"==typeof b?b.call(this):b){if("string"!=typeof b)return b;if(b=g.trim(b))return".json"===b.substr(-5)?g.get(b,function(b){b&&k.call(a,b)},"json"):d=E(b),d}}function F(b,k,a,d,j,l){l=l||0;var x=a.currentSrc,e,h=0,c=0,f=null,m=j.length;if(x)for(e=x.split(".").pop()||
"src";h<m;h++)if(j[h]&&j[h][e]===x){f=j[c=h+l];break}f||(c=0>l?m-1:0,f=j[c]);a.src=f[e]||"";b.setAttribute("data-cue-idx",c);y===d&&(b=G,d=f[G],null==d?a.removeAttribute(b):a.setAttribute(b,d));a.play();H(k,function(){var a,b,c,d;if(this&&1===this.nodeType&&(d=this.getAttribute(R),c=this.getAttribute(S),null!=d&&(d=f[d],null==d?g(this).empty():g(this).html(d)),c&&"string"==typeof c))for(a in c=E(c),c){if(!c.hasOwnProperty(a))break;if((b=c[a])&&"string"==typeof b){d=a;var e=f[b];null==e?this.removeAttribute(d):
this.setAttribute(d,e)}}});return c}function z(b,g,a,d){var j="data-"+a+"-cue",l={};l[j]="";return b.find(g).not("["+j+"]").on(a+".cue",d).attr(l).removeClass(I).addClass(J)}function w(b){return H(this,function(){function k(){var a=d.paused||d.ended;this.className="cue-"+(a?"pause":"play");f[a?"addClass":"removeClass"](T)[a?"removeClass":"addClass"](U)}if(1===this.nodeType){if("function"==typeof b)return w.call([this],b.call(this));var a,d,j,l,m,e,h,c,f=g(this);if(c=b||f.attr("data-cue"))if(c=Q(c,
w,f),"object"==typeof c&&(c=c?[].concat(c):[],d=f.find(y+","+K)[0])){l=d.tagName.toLowerCase();a=g(d);var p=f;a.each(function(){var a=this;null!=a.getAttribute(A)&&!p.find("."+L).length&&(a.removeAttribute(A),p.children().each(function(){if(this===a||g.contains(this,a))return B=B||g(V),!B.insertAfter(this)}))});var q=f.find(".cue-time");q.length&&a.on("timeupdate.cue",function(){q.html(O(this.currentTime))}).addClass(J).removeClass(I);z(f,".cue-play,.cue-pause","click",function(){d[d.paused||d.ended?
"play":"pause"]()});a.on("play.cue",k);a.on("pause.cue",k);if(h=c.length){for(;h--;){c[h]["track-number"]=h;if(a=c[h].src){a="string"==typeof a?a.split(" "):a;for(e=a.length;e--;)a[e]&&(m=a[e].split(".").pop())&&(c[h][m]=c[h][m]||a[e]);a=a[0]}a=c[h].src;e=function(a){var b=a.split(".").pop();c[h][b]=c[h][b]||a};var s=void 0,n=void 0,t=void 0,v=void 0,r=0,u=[];if(a){"function"!=typeof e&&null==s&&(s=e)&&(e=0);a="string"==typeof a?a.split(s||" "):a;for(n=a.length;r<n;)if(t=a[r++])v=u.push(t)-1,e&&e.call(t,
t,v,u)}a=c[h];a:{e=c[h];s=void 0;n=M[(l.nodeType?l.tagName:l).toLowerCase()];t=n.length;for(v=0;v<t;)if(s=e[n[v++]]){e=s;break a}e=""}a.src=e}j=this.getElementsByTagName("*");z(f,".cue-next","click",function(){F(f[0],j,d,l,c,1)});z(f,".cue-prev","click",function(){F(f[0],j,d,l,c,-1)})}else f.attr("data-cue","")}}})}for(var k=r.require,g=r.jQuery||!!k&&k("jquery")||r.ender||!!k&&k("ender"),H=g.each,W=/^\s+|\s+$/,X=g.trim||("".trim?function(b){return b.trim()}:function(b){return b.replace(W,"")}),N=
!!r.JSON&&JSON.parse,E=g.parseJSON||N&&function(b){return"string"!=typeof b||!(b=X(b))?null:N(b)},P=/(^|\D)(\d\D|\d$)/g,K="audio",y="video",A="controls",G="poster",J="cue-active",I="cue-inactive",U="cue-paused",T="cue-playing",R="data-cue-insert",S="data-cue-attr",M,k={},u,m,p,q,C,n,Y=[K,y],Z={audio:{m4a:["audio/x-m4a;","audio/aac;"],wav:["audio/mpeg;"],ogg:['audio/ogg;codecs="vorbis"'],mp3:["audio/mpeg;"]},video:{ogg:['video/ogg;codecs="theora"'],webm:['video/webm;codecs="vp8, vorbis"'],mp4:['video/mp4;codecs="avc1.42E01E"']}};m=
Y.pop();)if(u=D.createElement(m),k[m]=[],u.canPlayType)for(p in n=Z[m],n){if(!n.hasOwnProperty(p))break;for(C=n[p].length;C--;)if(q=u.canPlayType(n[p][C]),k[m][p]=!!q&&"no"!==q&&q){k[m]["maybe"===q?"push":"unshift"](p);break}}M=k;var L="cue-"+A,V="<div class="+L+"><button accesskey=j class=cue-prev title=previous><span>|&#9668;&#9668;</span></button><button accesskey=p class=cue-play title=play/pause><span>&#9658;</span><span>| |</span></button><button accesskey=k class=cue-next title=next><span>&#9658;&#9658;|</span></button><output class=cue-time></output></div>",
B;g.fn.cue=w;g(D).ready(function(){w.call(g("[data-cue]"))})})(this,document);